@{
	var shop = ViewData["Shop"] as OnlineMarketPlace.Models.Shop;
	if (shop == null)
	{
		<div class="alert alert-warning">Shop data is not available.</div>
		return;
	}
	var rating = ViewData["rating"] as string;

	var categoriesL = ViewData["CategoriesList"] as OnlineMarketPlace.Models.CategoriesList;

}

<head>
	<title>Shop</title>
	<link rel="stylesheet" href="~/css/style.css">
</head>

@await Html.PartialAsync("_ToastNotification")

<!-- Breadcrumb Start -->
<div class="breadcrumb-wrap">
	<div class="container">
		<ul class="breadcrumb">
			<li class="breadcrumb-item"><a asp-action="Index" asp-controller="Home">Home</a></li>
			<li class="breadcrumb-item active">Product</li>
			<li class="breadcrumb-item active">Shop</li>
		</ul>
	</div>
</div>
<!-- Breadcrumb End -->
<!-- Login Start -->
<div class="container">
	<div class="login">
		<div class="row">
			<div class="col-md-12" style="padding-left: 30px">
				<div class="row">
					<div class="col-md-5" style="padding: 1%; border: solid 1px">
						<div class="row">
							<div class="col-md-4">
								<img src="@shop.Logo" alt="Shop Logo" class="img-fluid rounded-circle mb-3" "                 />
							</div>
							<div class="col-md-8">
								<h4 class="shop-name" style="margin-bottom: 1%">@shop.Name</h4>
								<p><small style="color:#666666" ">@shop.Description</small></p>
								<button type="button" class="btn btn-outline-primary"><i class="fa fa-comments-o" aria-hidden="true"></i> <a href="#" style="color: white">Chat</a></button>
							</div>
						</div>

					</div>
					<div class="col-md-7" style="padding: 1%; padding-left:8%">
						<div class="row">
							<div class="col-md-7">
								<p><strong>Own:</strong> @shop.Owner.Username</p>
								<p><strong>Products:</strong> @shop.Products.Count</p>
								@{
									int total = 0;
									foreach (Product p in shop.Products)
									{
										total += p.QuantitySold;
									}
								}
								<p><strong>Sold:</strong> @total</p>
							</div>

							<div class="col-md-5">
								<p><strong>Rating:</strong> @rating</p>
								@{
									DateTime createdAt = shop.CreatedAt;
									TimeSpan timeDifference = DateTime.UtcNow - createdAt;

									string timeAgo;
									if (timeDifference.TotalDays >= 30)
									{
										int monthsAgo = (int)(timeDifference.TotalDays / 30);
										timeAgo = $"{monthsAgo} months ago";
									}
									else
									{
										int daysAgo = (int)timeDifference.TotalDays;
										timeAgo = $"{daysAgo} days ago";
									}
								}
								<p><strong>Joined:</strong> @timeAgo</p>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="col-md-12">
				<nav class="navbar navbar-expand-sm bg-light">
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link" href="#">Link 1</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">Link 2</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">Link 3</a>
						</li>
					</ul>
				</nav>
			</div>
		</div>
	</div>
</div>
<script>
	function password_show_hide() {
	  var x = document.getElementById("password");
	  var show_eye = document.getElementById("show_eye");
	  var hide_eye = document.getElementById("hide_eye");
	  hide_eye.classList.remove("d-none");
	  if (x.type === "password") {
		x.type = "text";
		show_eye.style.display = "none";
		hide_eye.style.display = "block";
	  } else {
		x.type = "password";
		show_eye.style.display = "block";
		hide_eye.style.display = "none";
	  }
	}
</script>
