@model OnlineMarketPlace.Models.CategoriesList

<div class="left-sidebar">
	<h2>Category</h2>
	<div class="panel-group category-products" id="accordian">
		<!-- Vong lap qua cac danh muc cha -->
		@for (int i = 0; i < Model.CategoriesParent.Count; i++)
		{
			<div class="panel panel-default">
				<div class="panel-heading">
					<h4 class="panel-title">
						<!-- Kiem tra xem danh muc co con hay khong -->
						@if (Model.CategoriesChild[i] == null || !Model.CategoriesChild[i].Any())
						{
							<!-- Neu khong co danh muc con, hien thi mot lien ket toi trang san pham cua danh muc -->
							<a href="@Url.Action("ProductsByCategory", "Category", new { categoryId = Model.CategoriesParent[i].Id })">
								@Model.CategoriesParent[i].Name
							</a>
						}
						else
						{
							<!-- Neu co danh muc con, hien thi mot lien ket co the mo rong danh muc con -->
							<a data-toggle="collapse" data-parent="#accordian" href="#@i.ToString()">
								<span class="badge pull-right"><i class="fa fa-plus"></i></span>
								@Model.CategoriesParent[i].Name
							</a>
						}
					</h4>
				</div>

				<!--chua danh muc con se mo rong khi nguoi dung nhap vao danh muc cha -->
				<div id="@i.ToString()" class="panel-collapse collapse">
					<div class="panel-body">
						<ul>
							<!-- Vong lap qua cac danh muc con cua danh muc cha -->
							@foreach (var child in Model.CategoriesChild[i])
							{
								<li>
									<!-- Lien ket toi trang san pham cua danh muc con -->
									<a href="@Url.Action("ProductsByCategory", "Category", new { categoryId = child.Id })">
										@child.Name
									</a>
								</li>
							}
						</ul>
					</div>
				</div>
			</div>
		}
	</div>

	<!-- Phan loc san pham theo gia -->
	<h2>Filter by Price</h2>
	<div class="radio-group">
		<!-- Form gui yeu cau loc theo gia -->
		<form method="get" action="@Url.Action("FilterByPriceRange", "Category")" id="priceFilterForm">
			<!-- Truyen categoryId vao form de giu lai danh muc khi loc -->
			<input type="hidden" name="categoryId" value="@ViewData["CategoryId"]" />

			<!-- Cac tuy chon lua chon gia -->
			<label>
				<input type="radio" name="price" value="0-100" onchange="submitPriceFilter()"> Below 100$
			</label>
			<label>
				<input type="radio" name="price" value="5-30" onchange="submitPriceFilter()"> 5 - 30$
			</label>
			<label>
				<input type="radio" name="price" value="100-" onchange="submitPriceFilter()"> Above 100$
			</label>
		</form>
	</div>
</div>


<script>
	function submitPriceFilter() {
		document.getElementById("priceFilterForm").submit();
	}
</script>

<style>
	.radio-group label {
		display: block;
		margin: 8px 0;
		cursor: pointer;
	}

	.radio-group input[type="radio"] {
		margin-right: 10px;
	}

	.radio-group label {
		display: flex;
		margin-right: 15px;
	}
</style>
