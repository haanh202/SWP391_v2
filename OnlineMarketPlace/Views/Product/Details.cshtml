<!--sửa 25/1/2025-->
@model OnlineMarketPlace.Models.Product
<div class="row">
	 <div class="col-sm-3"> 
	 	@{ 
	 		var categoriesL = ViewData["CategoriesList"] as OnlineMarketPlace.Models.CategoriesList; 
	 	} 
	 	@Html.Partial("_SidebarPartial", categoriesL); 
	 </div> 


	<div class="col-sm-9 padding-right">
		<div class="product-details">
			<!--product-details-->

			<div class="col-sm-5">
				<div class="view-product">
					<img src="~/images/home/@Model.Image" alt="" />

					@* <h3>ZOOM</h3> *@
				</div>
				<a href=""><img src="~/images/product-details/share.png" class="share img-responsive" alt="" /></a>
				<div id="similar-product" class="carousel slide" data-ride="carousel">
					<!--sửa 24/1 -->
					<!-- Wrapper for slides -->
					@* <div class="carousel-inner"> *@
					@* 	<div class="item active"> *@
					@* 		<a href=""><img src="~/images/product-details/similar1.jpg" alt=""></a> *@
					@* 		<a href=""><img src="~/images/product-details/similar2.jpg" alt=""></a> *@
					@* 		<a href=""><img src="~/images/product-details/similar3.jpg" alt=""></a> *@
					@* 	</div> *@


					@* </div> *@

					<!-- Controls -->
					<a class="left item-control" href="#similar-product" data-slide="prev">
						<i class="fa fa-angle-left"></i>
					</a>
					<a class="right item-control" href="#similar-product" data-slide="next">
						<i class="fa fa-angle-right"></i>
					</a>
				</div>

			</div>
			<div class="col-sm-7">
				<div class="product-information">
					<!--/product-information-->
					<img src="~/images/product-details/new.jpg" class="newarrival" alt="" />
					<h2>@Model.Name</h2>
					
                    <div>
						<!-- Xếp hạng -->
						<a href="#reviews" style="text-decoration: none; color: inherit;">
							4.9 <img src="~/images/product-details/rating.png" alt="Rating" style="height: 16px;" />
						</a>
						| <a href="#reviews" style="text-decoration: none; color: inherit;">
							1,3k Đánh Giá
						</a>
						| @Model.QuantitySold Đã bán
						| <span style="color: #007bff; cursor: pointer;">Tố cáo</span>
                    </div>


					<span>
						<span>@Model.Price VNĐ</span>
						<label>Quantity:</label>
						<input type="number" />
						
					</span>
					<p><b>Availability: </b>@Model.Inventory</p>
					<p><b>Condition:</b> New</p>
					<p><b>Brand:</b> E-SHOPPER</p>
	
					<button type="button" class="btn btn-fefault cart">
						<i class="fa fa-shopping-cart"></i>
						Add to cart
					</button>
					<button type="button" class="btn btn-fefault cart">
						Buy now
					</button>

					@Html.Partial("ProductReviewModal")

					<button type="button" class="btn btn-fefault cart review" data-product-id="@Model.Id" data-product-name="@Model.Name">
						Rate
					</button>

				</div><!--/product-information-->
			</div>
		</div><!--/product-details-->

		<div class="category-tab shop-details-tab">
			<!--category-tab-->
			<div class="col-sm-12">
				<ul class="nav nav-tabs">
					<li class="active d-block"><a href="#details" data-toggle="tab">Details</a></li>
					<li class=" d-block"><a href="#companyprofile" data-toggle="tab">Company Profile</a></li>
					<li class=" d-block"><a href="#reviews" data-toggle="tab">Reviews</a></li>
				</ul>
			</div>



			<div class="tab-content">
				<div class="tab-pane fade active in" id="details">
					@Model.Description					
				</div>

				@{
                    var company = ViewData["Shop"] as OnlineMarketPlace.Models.Shop;
				}
				<div class="tab-pane fade" id="companyprofile">
					@if (company != null)
					{
						<div class="card">
							<div class="card-header">
								<h3 class="card-title">Shop Information</h3>
							</div>
							<div class="card-body">
								<div class="row">
									<div class="col-md-4">
										<img src="@company.Logo" alt="@company.Name Logo" class="img-fluid rounded-circle mb-3" />
									</div>
									<div class="col-md-8">
										<h4>@company.Name</h4>
										<p>@company.Description</p>
										<div class="shop-details">
											<p><strong>Owner:</strong> @company.Owner.Name</p>
											<p><strong>Established:</strong> @company.CreatedAt.ToString("dd MMM yyyy")</p>
											<p><strong>Total Products:</strong> @company.Products.Count</p>
										</div>
									</div>
								</div>
								<div class="row mt-3">
									<div class="col-12 text-center">
										<a href="#" class="btn btn-success me-3">Chat ngay</a>
										<a asp-action="Shop" asp-controller="Shop" asp-route-id="@company.Id" class="btn btn-primary">Xem Shop</a>
									</div>
								</div>
							</div>
						</div>
					}
					else
					{
						<div class="alert alert-warning">No shop information available</div>
					}
				</div>

				 @{ 
				 	var reviews = ViewData["rv"] as List<OnlineMarketPlace.Models.RatingAndReview>; 
				 } 
				 <div class="tab-pane fade" id="reviews"> 
				 	<div class="col-sm-12">
						@if (reviews != null && reviews.Any())
						{
							<p>@($"Found {reviews.Count} reviews.")</p> <!-- Hiển thị số lượng phần tử -->
							<ul>
								@foreach (RatingAndReview review in reviews)
								{
									<li>

										<strong>Rating:</strong> @review.Rating <br />
										<strong>Review:</strong> @review.Review
									</li>
								}
							</ul>
						}
						else
						{
							<p>No reviews available.</p>
						}
						<p><b>Write Your Review</b></p>

						<form action="#">
							<span>
								<input type="text" placeholder="Your Name" />
								<input type="email" placeholder="Email Address" />
							</span>
							<textarea name=""></textarea>
							<b>Rating: </b> <img src="~/images/product-details/rating.png" alt="" />
							<button type="button" class="btn btn-default pull-right">
								Submit
							</button>
						</form>
					</div>
				</div>

			</div>
		</div><!--/category-tab-->


		@{
			var recommendedProducts = ViewData["RelatedProducts"] as List<Product>;
			int totalProducts = recommendedProducts?.Count ?? 0;
			int productsPerSlide = 3;
			int totalSlides = (int)Math.Ceiling((double)totalProducts / productsPerSlide);
		}

		<div class="recommended_items">
			<h2 class="title text-center">recommended items</h2>

			<div id="recommended-item-carousel" class="carousel slide" data-ride="carousel">
				<div class="carousel-inner">
					@for (int slideIndex = 0; slideIndex < totalSlides; slideIndex++)
					{
						<div class="item @(slideIndex == 0 ? "active" : "")">
							@for (int i = 0; i < productsPerSlide; i++)
							{
								int productIndex = slideIndex * productsPerSlide + i;
								if (productIndex < totalProducts)
								{
									var product = recommendedProducts[productIndex];
									<div class="col-sm-4">
										<div class="product-image-wrapper">
											<div class="single-products">
												<div class="productinfo text-center">
													<img src="@product.Image" alt="@product.Name" />
													<h2>$@product.Price</h2>
													<p>@product.Name</p>
													<button type="button" class="btn btn-default add-to-cart">
														<i class="fa fa-shopping-cart"></i>Add to cart
													</button>
												</div>
											</div>
										</div>
									</div>
								}
							}
						</div>
					}
				</div>
				@if (totalSlides > 1)
				{
					<a class="left recommended-item-control" href="#recommended-item-carousel" data-slide="prev">
						<i class="fa fa-angle-left"></i>
					</a>
					<a class="right recommended-item-control" href="#recommended-item-carousel" data-slide="next">
						<i class="fa fa-angle-right"></i>
					</a>
				}
			</div>
		</div>


	</div>

</div>

